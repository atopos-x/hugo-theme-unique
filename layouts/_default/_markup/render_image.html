{{/* layouts/_default/_markup/render-image.html */}}
{{- $src := .Destination | safeURL -}}

{{/* 
  如果路径以 "../assets/" 或 "assets/" 开头，
  强制修正为 "/posts/assets/..." （你可以根据实际路径改）
*/}}
{{- if or (strings.HasPrefix $src "../assets/") (strings.HasPrefix $src "assets/") -}}
  {{- $filename := path.Base $src -}}
  {{- $src = printf "/posts/assets/%s" $filename -}}
{{- end -}}

<img src="{{ $src }}" alt="{{ .Text }}" {{ with .Title }}title="{{ . }}"{{ end }} loading="lazy" />
